<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="600" fill="#f0f0f0"/>
  
  <!-- Title -->
  <text x="400" y="25" text-anchor="middle" font-size="20" font-weight="bold" fill="#000">MCP4921 DAC Circuit</text>
  
  <!-- Arduino -->
  <rect x="50" y="80" width="120" height="180" fill="#005C5C" stroke="#000" stroke-width="2" rx="5"/>
  <text x="110" y="70" text-anchor="middle" font-size="14" font-weight="bold" fill="#000">Arduino</text>
  
  <!-- Arduino pins -->
  <text x="40" y="110" text-anchor="end" font-size="12" fill="#000">5V</text>
  <text x="40" y="130" text-anchor="end" font-size="12" fill="#000">GND</text>
  <text x="40" y="160" text-anchor="end" font-size="12" fill="#000">D11</text>
  <text x="40" y="180" text-anchor="end" font-size="12" fill="#000">D13</text>
  
  <!-- Arduino connection points -->
  <circle cx="50" cy="105" r="4" fill="#ff0000"/>
  <circle cx="50" cy="125" r="4" fill="#000"/>
  <circle cx="50" cy="155" r="4" fill="#0080ff"/>
  <circle cx="50" cy="175" r="4" fill="#0080ff"/>
  
  <!-- MCP4921 IC -->
  <rect x="300" y="80" width="150" height="120" fill="#333" stroke="#000" stroke-width="2" rx="5"/>
  <text x="375" y="70" text-anchor="middle" font-size="14" font-weight="bold" fill="#000">MCP4921</text>
  <text x="375" y="130" text-anchor="middle" font-size="12" font-weight="bold" fill="#fff">12-bit DAC</text>
  <text x="375" y="150" text-anchor="middle" font-size="12" fill="#fff">SPI Interface</text>
  
  <!-- MCP4921 pins -->
  <text x="290" y="100" text-anchor="end" font-size="10" fill="#000">VCC</text>
  <text x="290" y="120" text-anchor="end" font-size="10" fill="#000">CS</text>
  <text x="290" y="140" text-anchor="end" font-size="10" fill="#000">SCK</text>
  <text x="290" y="160" text-anchor="end" font-size="10" fill="#000">SDI</text>
  
  <text x="460" y="100" font-size="10" fill="#000">VOUT</text>
  <text x="460" y="120" font-size="10" fill="#000">VSS</text>
  <text x="460" y="140" font-size="10" fill="#000">VREF</text>
  <text x="460" y="160" font-size="10" fill="#000">LDAC</text>
  
  <!-- Pin connection points -->
  <circle cx="300" cy="95" r="4" fill="#ff0000"/>
  <circle cx="300" cy="115" r="4" fill="#0080ff"/>
  <circle cx="300" cy="135" r="4" fill="#0080ff"/>
  <circle cx="300" cy="155" r="4" fill="#0080ff"/>
  
  <circle cx="450" cy="95" r="4" fill="#ff8800"/>
  <circle cx="450" cy="115" r="4" fill="#000"/>
  <circle cx="450" cy="135" r="4" fill="#ff0000"/>
  <circle cx="450" cy="155" r="4" fill="#000"/>
  
  <!-- CV Output -->
  <rect x="550" y="80" width="120" height="60" fill="#666" stroke="#000" stroke-width="2" rx="5"/>
  <text x="610" y="105" text-anchor="middle" font-size="12" font-weight="bold" fill="#fff">CV Output</text>
  <text x="610" y="125" text-anchor="middle" font-size="12" fill="#fff">0-4.096V</text>
  
  <!-- Connection lines -->
  <line x1="50" y1="105" x2="250" y2="105" stroke="#ff0000" stroke-width="2"/>
  <line x1="250" y1="105" x2="250" y2="95" stroke="#ff0000" stroke-width="2"/>
  <line x1="250" y1="95" x2="300" y2="95" stroke="#ff0000" stroke-width="2"/>
  <line x1="250" y1="105" x2="250" y2="135" stroke="#ff0000" stroke-width="2"/>
  <line x1="250" y1="135" x2="450" y2="135" stroke="#ff0000" stroke-width="2"/>
  
  <line x1="50" y1="125" x2="200" y2="125" stroke="#000" stroke-width="2"/>
  <line x1="200" y1="125" x2="200" y2="115" stroke="#000" stroke-width="2"/>
  <line x1="200" y1="115" x2="450" y2="115" stroke="#000" stroke-width="2"/>
  <line x1="200" y1="125" x2="200" y2="155" stroke="#000" stroke-width="2"/>
  <line x1="200" y1="155" x2="450" y2="155" stroke="#000" stroke-width="2"/>
  
  <line x1="50" y1="155" x2="275" y2="155" stroke="#0080ff" stroke-width="2"/>
  <line x1="275" y1="155" x2="275" y2="135" stroke="#0080ff" stroke-width="2"/>
  <line x1="275" y1="135" x2="300" y2="135" stroke="#0080ff" stroke-width="2"/>
  <line x1="275" y1="155" x2="300" y2="155" stroke="#0080ff" stroke-width="2"/>
  
  <line x1="50" y1="175" x2="300" y2="115" stroke="#0080ff" stroke-width="2"/>
  
  <line x1="450" y1="95" x2="550" y2="110" stroke="#ff8800" stroke-width="3"/>
  
  <!-- Labels -->
  <text x="130" y="95" font-size="10" fill="#ff0000">+5V Power</text>
  <text x="110" y="115" font-size="10" fill="#000">Ground</text>
  <text x="130" y="145" font-size="10" fill="#0080ff">SPI Data</text>
  <text x="130" y="165" font-size="10" fill="#0080ff">Chip Select</text>
  <text x="500" y="85" font-size="10" fill="#ff8800">To ML-303</text>
  
  <!-- Component list -->
  <rect x="50" y="280" width="700" height="300" fill="#fff" stroke="#000" stroke-width="1"/>
  <text x="60" y="300" font-size="14" font-weight="bold" fill="#000">MCP4921 DAC Components:</text>
  
  <text x="60" y="325" font-size="12" font-weight="bold" fill="#000">Main Components:</text>
  <text x="70" y="340" font-size="11" fill="#000">• 1× MCP4921 12-bit DAC (DIP-8)</text>
  <text x="70" y="355" font-size="11" fill="#000">• 1× 0.1µF ceramic capacitor (bypass)</text>
  <text x="70" y="370" font-size="11" fill="#000">• Optional: TL072 buffer amplifier</text>
  
  <text x="60" y="395" font-size="12" font-weight="bold" fill="#000">Connections:</text>
  <text x="70" y="410" font-size="11" fill="#000">VCC,VREF → Arduino +5V</text>
  <text x="70" y="425" font-size="11" fill="#000">VSS,LDAC → Arduino GND</text>
  <text x="70" y="440" font-size="11" fill="#000">CS → Arduino D13</text>
  <text x="70" y="455" font-size="11" fill="#000">SCK,SDI → Arduino D11 (SPI)</text>
  <text x="70" y="470" font-size="11" fill="#000">VOUT → CV Output (0-4.096V)</text>
  
  <text x="400" y="325" font-size="12" font-weight="bold" fill="#000">Arduino Code:</text>
  <text x="410" y="340" font-size="10" fill="#000">#include &lt;SPI.h&gt;</text>
  <text x="410" y="355" font-size="10" fill="#000">#define DAC_CS 13</text>
  <text x="410" y="370" font-size="10" fill="#000">void setCV(uint16_t value) {</text>
  <text x="420" y="385" font-size="10" fill="#000">  value &= 0x0FFF;</text>
  <text x="420" y="400" font-size="10" fill="#000">  uint16_t cmd = 0x3000 | value;</text>
  <text x="420" y="415" font-size="10" fill="#000">  digitalWrite(DAC_CS, LOW);</text>
  <text x="420" y="430" font-size="10" fill="#000">  SPI.transfer16(cmd);</text>
  <text x="420" y="445" font-size="10" fill="#000">  digitalWrite(DAC_CS, HIGH);</text>
  <text x="410" y="460" font-size="10" fill="#000">}</text>
  
  <text x="60" y="510" font-size="12" font-weight="bold" fill="#000">Technical Specs:</text>
  <text x="70" y="525" font-size="11" fill="#000">• Resolution: 12-bit (4096 steps)</text>
  <text x="70" y="540" font-size="11" fill="#000">• Output Range: 0 to VREF (0-5V)</text>
  <text x="70" y="555" font-size="11" fill="#000">• Interface: SPI (20 MHz max)</text>
  <text x="70" y="570" font-size="11" fill="#000">• Power: 2.7V-5.5V, &lt;1mA</text>
</svg>