<?xml version="1.0" encoding="UTF-8"?>
<svg width="1600" height="1200" viewBox="0 0 1600 1200" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .component { fill: #444; stroke: #888; stroke-width: 3; }
      .arduino { fill: #005C5C; stroke: #00a0a0; stroke-width: 3; }
      .lcd { fill: #004400; stroke: #00ff00; stroke-width: 3; }
      .ml303 { fill: #440000; stroke: #ff0000; stroke-width: 3; }
      .wire { fill: none; stroke-width: 4; }
      .power { stroke: #ff0000; stroke-width: 5; }
      .ground { stroke: #000000; stroke-width: 5; }
      .signal { stroke: #00ff00; stroke-width: 4; }
      .lcd-data { stroke: #ffff00; stroke-width: 4; }
      .analog { stroke: #ffaa00; stroke-width: 4; }
      text { fill: #fff; font-size: 16px; font-family: Arial, sans-serif; font-weight: bold; }
      .label { font-size: 20px; font-weight: bold; }
      .title { font-size: 28px; font-weight: bold; fill: #ff3333; }
      .warning { fill: #ffaa00; font-size: 18px; font-weight: bold; }
      .pin-text { font-size: 14px; fill: #fff; font-weight: bold; }
      .connection-label { font-size: 18px; fill: #00ffff; font-weight: bold; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="1600" height="1200" fill="#222"/>
  
  <!-- Title -->
  <text x="800" y="40" text-anchor="middle" class="title">ML-303 Arduino Integration Wiring</text>
  <text x="800" y="70" text-anchor="middle" class="warning">⚠️ FIXED Pin Assignments - All Conflicts Resolved!</text>
  
  <!-- Arduino Uno -->
  <rect class="arduino" x="100" y="150" width="300" height="600" rx="15"/>
  <text x="250" y="130" text-anchor="middle" class="label">Arduino Uno</text>
  
  <!-- Arduino Pin Labels - Left Side -->
  <text x="80" y="200" text-anchor="end" class="pin-text">5V</text>
  <text x="80" y="230" text-anchor="end" class="pin-text">GND</text>
  <text x="80" y="280" text-anchor="end" class="pin-text">A0</text>
  <text x="80" y="310" text-anchor="end" class="pin-text">A1</text>
  <text x="80" y="340" text-anchor="end" class="pin-text">A2</text>
  <text x="80" y="370" text-anchor="end" class="pin-text">A3</text>
  <text x="80" y="420" text-anchor="end" class="pin-text">A4</text>
  <text x="80" y="450" text-anchor="end" class="pin-text">A5</text>
  <text x="80" y="500" text-anchor="end" class="pin-text">D2</text>
  <text x="80" y="530" text-anchor="end" class="pin-text">D3</text>
  <text x="80" y="560" text-anchor="end" class="pin-text">D4</text>
  <text x="80" y="590" text-anchor="end" class="pin-text">D5</text>
  <text x="80" y="620" text-anchor="end" class="pin-text">D6</text>
  
  <!-- Arduino Pin Labels - Right Side -->
  <text x="420" y="200" text-anchor="start" class="pin-text">D13</text>
  <text x="420" y="230" text-anchor="start" class="pin-text">D12</text>
  <text x="420" y="260" text-anchor="start" class="pin-text">D11</text>
  <text x="420" y="290" text-anchor="start" class="pin-text">D10</text>
  <text x="420" y="320" text-anchor="start" class="pin-text">D9</text>
  <text x="420" y="350" text-anchor="start" class="pin-text">D8</text>
  <text x="420" y="380" text-anchor="start" class="pin-text">D7</text>
  
  <!-- Pin Connection Points -->
  <circle cx="100" cy="195" r="8" fill="#ff0000"/>  <!-- 5V -->
  <circle cx="100" cy="225" r="8" fill="#000000"/>  <!-- GND -->
  <circle cx="100" cy="275" r="8" fill="#ffaa00"/>  <!-- A0 -->
  <circle cx="100" cy="305" r="8" fill="#ffaa00"/>  <!-- A1 -->
  <circle cx="100" cy="335" r="8" fill="#ffaa00"/>  <!-- A2 -->
  <circle cx="100" cy="365" r="8" fill="#ffaa00"/>  <!-- A3 -->
  <circle cx="100" cy="415" r="8" fill="#00ff00"/>  <!-- A4 -->
  <circle cx="100" cy="445" r="8" fill="#00ff00"/>  <!-- A5 -->
  <circle cx="100" cy="495" r="8" fill="#00aaff"/>  <!-- D2 -->
  <circle cx="100" cy="525" r="8" fill="#00aaff"/>  <!-- D3 -->
  <circle cx="100" cy="555" r="8" fill="#00aaff"/>  <!-- D4 -->
  <circle cx="100" cy="585" r="8" fill="#00aaff"/>  <!-- D5 -->
  <circle cx="100" cy="615" r="8" fill="#00aaff"/>  <!-- D6 -->
  
  <circle cx="400" cy="195" r="8" fill="#00aaff"/>  <!-- D13 -->
  <circle cx="400" cy="225" r="8" fill="#ffff00"/>  <!-- D12 -->
  <circle cx="400" cy="255" r="8" fill="#ffff00"/>  <!-- D11 -->
  <circle cx="400" cy="285" r="8" fill="#ffff00"/>  <!-- D10 -->
  <circle cx="400" cy="315" r="8" fill="#ffff00"/>  <!-- D9 -->
  <circle cx="400" cy="345" r="8" fill="#ffff00"/>  <!-- D8 -->
  <circle cx="400" cy="375" r="8" fill="#ffff00"/>  <!-- D7 -->
  
  <!-- LCD Display -->
  <rect class="lcd" x="600" y="100" width="400" height="200" rx="15"/>
  <text x="800" y="85" text-anchor="middle" class="label">16x2 LCD Display (SMH1602A)</text>
  <text x="800" y="150" text-anchor="middle" class="connection-label">Standard Parallel Interface</text>
  <text x="800" y="175" text-anchor="middle" class="warning">(NOT I2C)</text>
  
  <!-- LCD Pin Labels -->
  <text x="580" y="130" text-anchor="end" class="pin-text">VCC</text>
  <text x="580" y="160" text-anchor="end" class="pin-text">GND</text>
  <text x="580" y="190" text-anchor="end" class="pin-text">V0</text>
  <text x="580" y="220" text-anchor="end" class="pin-text">RS</text>
  <text x="580" y="250" text-anchor="end" class="pin-text">E</text>
  <text x="580" y="280" text-anchor="end" class="pin-text">D4-D7</text>
  
  <text x="1020" y="130" text-anchor="start" class="pin-text">LED+</text>
  <text x="1020" y="160" text-anchor="start" class="pin-text">LED-</text>
  
  <!-- LCD Pin Connection Points -->
  <circle cx="600" cy="125" r="8" fill="#ff0000"/>  <!-- VCC -->
  <circle cx="600" cy="155" r="8" fill="#000000"/>  <!-- GND -->
  <circle cx="600" cy="185" r="8" fill="#666666"/>  <!-- V0 -->
  <circle cx="600" cy="215" r="8" fill="#ffff00"/>  <!-- RS -->
  <circle cx="600" cy="245" r="8" fill="#ffff00"/>  <!-- E -->
  <circle cx="600" cy="275" r="8" fill="#ffff00"/>  <!-- D4-D7 -->
  
  <!-- ML-303 Interface Block -->
  <rect class="ml303" x="1100" y="350" width="450" height="600" rx="15"/>
  <text x="1325" y="330" text-anchor="middle" class="label">ML-303 Interface Points</text>
  
  <!-- ML-303 Connection Points -->
  <text x="1080" y="390" text-anchor="end" class="pin-text">+5V Power</text>
  <text x="1080" y="420" text-anchor="end" class="pin-text">GND</text>
  <text x="1080" y="470" text-anchor="end" class="pin-text">Cutoff CV</text>
  <text x="1080" y="500" text-anchor="end" class="pin-text">Resonance CV</text>
  <text x="1080" y="530" text-anchor="end" class="pin-text">Env Mod CV</text>
  <text x="1080" y="560" text-anchor="end" class="pin-text">Decay CV</text>
  <text x="1080" y="610" text-anchor="end" class="pin-text">Clock In</text>
  <text x="1080" y="640" text-anchor="end" class="pin-text">Gate In</text>
  <text x="1080" y="670" text-anchor="end" class="pin-text">Run/Stop Btn</text>
  <text x="1080" y="700" text-anchor="end" class="pin-text">Pattern Btn</text>
  <text x="1080" y="730" text-anchor="end" class="pin-text">Gate Out</text>
  <text x="1080" y="780" text-anchor="end" class="pin-text">MIDI In/Out</text>
  <text x="1080" y="810" text-anchor="end" class="pin-text">CV Output</text>
  
  <!-- ML-303 Connection Points -->
  <circle cx="1100" cy="385" r="8" fill="#ff0000"/>  <!-- +5V -->
  <circle cx="1100" cy="415" r="8" fill="#000000"/>  <!-- GND -->
  <circle cx="1100" cy="465" r="8" fill="#ffaa00"/>  <!-- Cutoff -->
  <circle cx="1100" cy="495" r="8" fill="#ffaa00"/>  <!-- Resonance -->
  <circle cx="1100" cy="525" r="8" fill="#ffaa00"/>  <!-- Env Mod -->
  <circle cx="1100" cy="555" r="8" fill="#ffaa00"/>  <!-- Decay -->
  <circle cx="1100" cy="605" r="8" fill="#00aaff"/>  <!-- Clock -->
  <circle cx="1100" cy="635" r="8" fill="#00aaff"/>  <!-- Gate In -->
  <circle cx="1100" cy="665" r="8" fill="#00aaff"/>  <!-- Run/Stop -->
  <circle cx="1100" cy="695" r="8" fill="#00aaff"/>  <!-- Pattern -->
  <circle cx="1100" cy="725" r="8" fill="#00aaff"/>  <!-- Gate Out -->
  <circle cx="1100" cy="775" r="8" fill="#00ff00"/>  <!-- MIDI -->
  <circle cx="1100" cy="805" r="8" fill="#ffaa00"/>  <!-- CV Out -->
  
  <!-- MIDI Interface Box -->
  <rect class="component" x="600" y="400" width="200" height="100" rx="10"/>
  <text x="700" y="430" text-anchor="middle" class="label">MIDI Interface</text>
  <text x="700" y="455" text-anchor="middle" class="pin-text">6N138 Optocoupler</text>
  <text x="700" y="480" text-anchor="middle" class="pin-text">DIN-5 Connectors</text>
  
  <!-- DAC Box -->
  <rect class="component" x="600" y="550" width="200" height="100" rx="10"/>
  <text x="700" y="580" text-anchor="middle" class="label">MCP4921 DAC</text>
  <text x="700" y="605" text-anchor="middle" class="pin-text">12-bit CV Output</text>
  <text x="700" y="630" text-anchor="middle" class="pin-text">0-4.096V Range</text>
  
  <!-- Contrast Potentiometer -->
  <rect class="component" x="750" y="50" width="100" height="30" rx="5"/>
  <text x="800" y="45" text-anchor="middle" class="pin-text">10kΩ Contrast Pot</text>
  <text x="800" y="70" text-anchor="middle" class="pin-text">LCD V0 Control</text>
  
  <!-- Major Connection Wires -->
  <!-- Power Connections -->
  <line class="power" x1="100" y1="195" x2="600" y2="125"/>    <!-- 5V to LCD -->
  <line class="power" x1="600" y1="125" x2="1100" y2="385"/>   <!-- 5V to ML-303 -->
  <line class="ground" x1="100" y1="225" x2="600" y2="155"/>   <!-- GND to LCD -->
  <line class="ground" x1="600" y1="155" x2="1100" y2="415"/>  <!-- GND to ML-303 -->
  
  <!-- LCD Control Lines -->
  <line class="lcd-data" x1="400" y1="225" x2="600" y2="215"/>  <!-- D12 to RS -->
  <line class="lcd-data" x1="400" y1="255" x2="600" y2="245"/>  <!-- D11 to E -->
  <line class="lcd-data" x1="400" y1="285" x2="600" y2="275"/>  <!-- D10 to D4 -->
  <line class="lcd-data" x1="400" y1="315" x2="600" y2="275"/>  <!-- D9 to D5 -->
  <line class="lcd-data" x1="400" y1="345" x2="600" y2="275"/>  <!-- D8 to D6 -->
  <line class="lcd-data" x1="400" y1="375" x2="600" y2="275"/>  <!-- D7 to D7 -->
  
  <!-- Analog Monitoring Lines -->
  <line class="analog" x1="100" y1="275" x2="1100" y2="465"/>   <!-- A0 to Cutoff -->
  <line class="analog" x1="100" y1="305" x2="1100" y2="495"/>   <!-- A1 to Resonance -->
  <line class="analog" x1="100" y1="335" x2="1100" y2="525"/>   <!-- A2 to Env Mod -->
  <line class="analog" x1="100" y1="365" x2="1100" y2="555"/>   <!-- A3 to Decay -->
  
  <!-- Digital I/O Lines -->
  <line class="signal" x1="100" y1="495" x2="1100" y2="665"/>   <!-- D2 to Run/Stop -->
  <line class="signal" x1="100" y1="525" x2="1100" y2="695"/>   <!-- D3 to Pattern -->
  <line class="signal" x1="100" y1="555" x2="1100" y2="605"/>   <!-- D4 to Clock -->
  <line class="signal" x1="100" y1="585" x2="1100" y2="635"/>   <!-- D5 to Gate In -->
  <line class="signal" x1="100" y1="615" x2="1100" y2="725"/>   <!-- D6 to Gate Out -->
  
  <!-- MIDI Lines -->
  <line class="signal" x1="100" y1="415" x2="700" y2="450"/>    <!-- A4 to MIDI -->
  <line class="signal" x1="100" y1="445" x2="700" y2="450"/>    <!-- A5 to MIDI -->
  <line class="signal" x1="800" y1="450" x2="1100" y2="775"/>   <!-- MIDI to ML-303 -->
  
  <!-- DAC Lines -->
  <line class="signal" x1="400" y1="195" x2="700" y2="580"/>    <!-- D13 to DAC CS -->
  <line class="signal" x1="400" y1="255" x2="700" y2="600"/>    <!-- D11 to DAC SCK/MOSI -->
  <line class="analog" x1="800" y1="600" x2="1100" y2="805"/>   <!-- DAC Out to CV -->
  
  <!-- Connection Labels -->
  <text x="350" y="160" class="connection-label">5V Power</text>
  <text x="350" y="190" class="connection-label">Ground</text>
  <text x="500" y="240" class="connection-label">LCD Control</text>
  <text x="550" y="380" class="connection-label">Analog CVs</text>
  <text x="550" y="580" class="connection-label">Digital I/O</text>
  <text x="450" y="430" class="connection-label">MIDI</text>
  <text x="850" y="620" class="connection-label">CV Output</text>
  
  <!-- Critical Information Box -->
  <rect fill="#333" stroke="#ff3333" stroke-width="4" x="50" y="800" width="1500" height="350" rx="10"/>
  <text x="70" y="830" class="label" fill="#ff3333">CRITICAL PIN ASSIGNMENTS (FIXED - NO CONFLICTS):</text>
  
  <text x="70" y="870" class="pin-text" fill="#ffff00">LCD Interface (6 pins):</text>
  <text x="90" y="900" class="pin-text" fill="#fff">• D12 → RS (Register Select)   • D11 → E (Enable)   • D10 → D4 (Data)</text>
  <text x="90" y="925" class="pin-text" fill="#fff">• D9 → D5 (Data)   • D8 → D6 (Data)   • D7 → D7 (Data)</text>
  <text x="90" y="950" class="pin-text" fill="#fff">• 10kΩ potentiometer required for contrast control (V0 pin)</text>
  
  <text x="800" y="870" class="pin-text" fill="#ffff00">Control & I/O:</text>
  <text x="820" y="900" class="pin-text" fill="#fff">• D2 → Run/Stop Button (INT0)</text>
  <text x="820" y="925" class="pin-text" fill="#fff">• D3 → Pattern Button (INT1)</text>
  <text x="820" y="950" class="pin-text" fill="#fff">• D4 → Clock Input   • D5 → Gate Input</text>
  <text x="820" y="975" class="pin-text" fill="#fff">• D6 → Gate Output (PWM capable)</text>
  
  <text x="70" y="990" class="pin-text" fill="#ffff00">Analog Monitoring:</text>
  <text x="90" y="1015" class="pin-text" fill="#fff">• A0 → Cutoff CV Monitor   • A1 → Resonance CV Monitor</text>
  <text x="90" y="1040" class="pin-text" fill="#fff">• A2 → Env Mod CV Monitor   • A3 → Decay CV Monitor</text>
  
  <text x="800" y="1000" class="pin-text" fill="#ffff00">MIDI & DAC:</text>
  <text x="820" y="1025" class="pin-text" fill="#fff">• A4 → MIDI RX (via 6N138 optocoupler)</text>
  <text x="820" y="1050" class="pin-text" fill="#fff">• A5 → MIDI TX (via 220Ω resistor)</text>
  <text x="820" y="1075" class="pin-text" fill="#fff">• D13 → DAC CS   • D11 → DAC SCK/MOSI (shared)</text>
  
  <text x="70" y="1100" class="pin-text" fill="#ff0000">⚠️ SAFETY: ML-303 sequencer board has NO reverse polarity protection!</text>
  <text x="70" y="1125" class="pin-text" fill="#ff0000">Always verify power connections with continuity tester before power-up!</text>
</svg>