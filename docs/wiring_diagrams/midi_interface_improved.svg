<?xml version="1.0" encoding="UTF-8"?>
<svg width="1000" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .power-wire { stroke: #FF0000; stroke-width: 4; fill: none; }
      .ground-wire { stroke: #000000; stroke-width: 4; fill: none; }
      .signal-wire { stroke: #0066FF; stroke-width: 3; fill: none; }
      .midi-wire { stroke: #00CC66; stroke-width: 3; fill: none; }
      
      .midi-connector { fill: #333333; stroke: #111111; stroke-width: 2; }
      .resistor { fill: #D2B48C; stroke: #8B7355; stroke-width: 2; }
      .ic-body { fill: #222222; stroke: #666666; stroke-width: 2; }
      .arduino-board { fill: #006666; stroke: #004444; stroke-width: 2; }
      
      .pin-power { fill: #FF0000; stroke: #CC0000; stroke-width: 1; }
      .pin-ground { fill: #000000; stroke: #333333; stroke-width: 1; }
      .pin-signal { fill: #0066FF; stroke: #0044CC; stroke-width: 1; }
      .pin-midi { fill: #00CC66; stroke: #009944; stroke-width: 1; }
      
      .label-title { font-size: 24px; font-weight: bold; fill: #000000; font-family: Arial, sans-serif; }
      .label-section { font-size: 16px; font-weight: bold; fill: #000000; font-family: Arial, sans-serif; }
      .label-component { font-size: 12px; font-weight: bold; fill: #FFFFFF; font-family: Arial, sans-serif; }
      .label-pin { font-size: 10px; font-weight: bold; fill: #000000; font-family: Arial, sans-serif; }
      .label-wire { font-size: 10px; font-weight: bold; fill: #000000; font-family: Arial, sans-serif; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="1000" height="700" fill="#F5F5F5"/>
  
  <!-- Title -->
  <text x="500" y="30" text-anchor="middle" class="label-title">MIDI Interface Circuit - Detailed Wiring</text>
  <text x="500" y="55" text-anchor="middle" class="label-section">6N138 Optocoupler Implementation</text>
  
  <!-- MIDI INPUT Section -->
  <text x="150" y="100" text-anchor="middle" class="label-section">MIDI INPUT</text>
  
  <!-- MIDI IN DIN-5 Connector -->
  <circle class="midi-connector" cx="100" cy="140" r="30"/>
  <text x="100" y="120" text-anchor="middle" class="label-section">DIN-5</text>
  <text x="100" y="180" text-anchor="middle" class="label-pin">MIDI IN</text>
  
  <!-- DIN-5 pin numbers -->
  <circle cx="85" cy="130" r="3" fill="#FFFF00"/>
  <text x="75" y="135" class="label-pin">4</text>
  
  <circle cx="85" cy="150" r="3" fill="#FFFF00"/>
  <text x="75" y="155" class="label-pin">5</text>
  
  <circle cx="115" cy="140" r="3" fill="#666666"/>
  <text x="125" y="145" class="label-pin">2 (shield)</text>
  
  <!-- Input Resistors -->
  <rect class="resistor" x="180" y="125" width="40" height="10" rx="3"/>
  <text x="200" y="140" text-anchor="middle" class="label-component">220Ω</text>
  <text x="200" y="115" text-anchor="middle" class="label-pin">R1</text>
  
  <rect class="resistor" x="180" y="145" width="40" height="10" rx="3"/>
  <text x="200" y="160" text-anchor="middle" class="label-component">220Ω</text>
  <text x="200" y="175" text-anchor="middle" class="label-pin">R2</text>
  
  <!-- 6N138 Optocoupler -->
  <rect class="ic-body" x="280" y="110" width="80" height="60" rx="5"/>
  <text x="320" y="130" text-anchor="middle" class="label-component">6N138</text>
  <text x="320" y="145" text-anchor="middle" font-size="10" fill="#CCCCCC">Optocoupler</text>
  <text x="320" y="160" text-anchor="middle" font-size="10" fill="#CCCCCC">High Speed</text>
  
  <!-- 6N138 Pin diagram -->
  <circle cx="280" cy="125" r="4" fill="#FFFF00"/>
  <text x="265" y="130" text-anchor="end" class="label-pin">2</text>
  
  <circle cx="280" cy="140" r="4" fill="#FFFF00"/>
  <text x="265" y="145" text-anchor="end" class="label-pin">3</text>
  
  <circle cx="280" cy="155" r="4" fill="#000000"/>
  <text x="265" y="160" text-anchor="end" class="label-pin">5</text>
  
  <circle cx="360" cy="125" r="4" fill="#FF0000"/>
  <text x="375" y="130" class="label-pin">8</text>
  
  <circle cx="360" cy="140" r="4" fill="#0066FF"/>
  <text x="375" y="145" class="label-pin">6</text>
  
  <circle cx="360" cy="155" r="4" fill="#000000"/>
  <text x="375" y="160" class="label-pin">5</text>
  
  <!-- Pull-up Resistor -->
  <rect class="resistor" x="420" y="135" width="10" height="30" rx="3"/>
  <text x="445" y="150" class="label-component">4.7kΩ</text>
  <text x="425" y="125" text-anchor="middle" class="label-pin">R3</text>
  
  <!-- Arduino Section -->
  <rect class="arduino-board" x="500" y="100" width="100" height="120" rx="8"/>
  <text x="550" y="90" text-anchor="middle" class="label-section">Arduino</text>
  
  <!-- Arduino pins -->
  <circle class="pin-power" cx="520" cy="120" r="5"/>
  <text x="505" y="125" text-anchor="end" class="label-pin">5V</text>
  
  <circle class="pin-ground" cx="520" cy="140" r="5"/>
  <text x="505" y="145" text-anchor="end" class="label-pin">GND</text>
  
  <circle class="pin-signal" cx="520" cy="160" r="5"/>
  <text x="505" y="165" text-anchor="end" class="label-pin">A4</text>
  
  <circle class="pin-midi" cx="520" cy="180" r="5"/>
  <text x="505" y="185" text-anchor="end" class="label-pin">A5</text>
  
  <circle class="pin-signal" cx="580" cy="120) r="5"/>
  <text x="595" y="125" class="label-pin">D13</text>
  
  <!-- MIDI OUTPUT Section -->
  <text x="750" y="100" text-anchor="middle" class="label-section">MIDI OUTPUT</text>
  
  <!-- MIDI OUT DIN-5 Connector -->
  <circle class="midi-connector" cx="800" cy="140" r="30"/>
  <text x="800" y="120" text-anchor="middle" class="label-section">DIN-5</text>
  <text x="800" y="180" text-anchor="middle" class="label-pin">MIDI OUT</text>
  
  <!-- Output DIN-5 pins -->
  <circle cx="785" cy="130" r="3" fill="#FFFF00"/>
  <text x="775" y="135" class="label-pin">4</text>
  
  <circle cx="785" cy="150" r="3" fill="#FFFF00"/>
  <text x="775" y="155" class="label-pin">5</text>
  
  <!-- Output Resistor -->
  <rect class="resistor" x="680" y="145" width="40" height="10" rx="3"/>
  <text x="700" y="160" text-anchor="middle" class="label-component">220Ω</text>
  <text x="700" y="135" text-anchor="middle" class="label-pin">R4</text>
  
  <!-- Wiring Connections -->
  
  <!-- MIDI IN to Resistors -->
  <path class="midi-wire" d="M 115 130 L 180 130"/>
  <path class="midi-wire" d="M 115 150 L 180 150"/>
  
  <!-- Resistors to 6N138 -->
  <path class="signal-wire" d="M 220 130 L 280 125"/>
  <path class="signal-wire" d="M 220 150 L 280 140"/>
  
  <!-- 6N138 to Pull-up and Arduino -->
  <path class="signal-wire" d="M 360 140 L 420 140"/>
  <path class="signal-wire" d="M 430 140 L 520 160"/>
  <text x="460" y="135" class="label-wire">MIDI RX</text>
  
  <!-- Power connections -->
  <path class="power-wire" d="M 360 125 L 400 125 L 400 100 L 520 100 L 520 120"/>
  <text x="430" y="95" class="label-wire">+5V</text>
  
  <path class="power-wire" d="M 425 125 L 425 100 L 440 100"/>
  
  <path class="ground-wire" d="M 280 155 L 260 155 L 260 190 L 520 190 L 520 140"/>
  <path class="ground-wire" d="M 360 155 L 380 155 L 380 190"/>
  <path class="ground-wire" d="M 425 165 L 425 190"/>
  <text x="350" y="205" class="label-wire">GROUND</text>
  
  <!-- MIDI OUT connections -->
  <path class="midi-wire" d="M 520 180 L 600 180 L 600 150 L 680 150"/>
  <text x="600" y="175" class="label-wire">MIDI TX</text>
  
  <path class="midi-wire" d="M 720 150 L 785 150"/>
  
  <path class="power-wire" d="M 520 120 L 650 120 L 650 130 L 785 130"/>
  <text x="650" y="115" class="label-wire">+5V to MIDI OUT</text>
  
  <!-- Wire labels -->
  <text x="150" y="115" class="label-wire">31.25 kbaud</text>
  <text x="150" y="125" class="label-wire">5V current loop</text>
  
  <text x="320" y="185" class="label-wire">Electrical Isolation</text>
  <text x="320" y="195" class="label-wire">2500V rated</text>
  
  <text x="720" y="115" class="label-wire">Standard MIDI</text>
  <text x="720" y="125" class="label-wire">Current Loop</text>
  
  <!-- Component Details Box -->
  <rect x="50" y="300" width="900" height="350" fill="#FFFFFF" stroke="#CCCCCC" stroke-width="2" rx="10"/>
  <text x="70" y="325" class="label-section">MIDI Interface Component Details</text>
  
  <!-- Components list -->
  <text x="70" y="355" font-size="14" font-weight="bold" fill="#000">Required Components:</text>
  
  <text x="90" y="380" font-size="12" font-weight="bold" fill="#000">Main Components:</text>
  <text x="110" y="400" font-size="11" fill="#000">• 1× 6N138 High-Speed Optocoupler (DIP-8 package)</text>
  <text x="110" y="415" font-size="11" fill="#000">• 3× 220Ω resistors (1/4W, 5% tolerance)</text>
  <text x="110" y="430" font-size="11" fill="#000">• 1× 4.7kΩ resistor (1/4W, 5% tolerance)</text>
  <text x="110" y="445" font-size="11" fill="#000">• 2× DIN-5 female panel mount connectors (180°)</text>
  <text x="110" y="460" font-size="11" fill="#000">• 1× 0.1µF ceramic bypass capacitor (optional)</text>
  
  <text x="90" y="485" font-size="12" font-weight="bold" fill="#000">Circuit Operation:</text>
  <text x="110" y="505" font-size="11" fill="#000">• MIDI IN pins 4,5 connect through 220Ω resistors to 6N138 LED (pins 2,3)</text>
  <text x="110" y="520" font-size="11" fill="#000">• 6N138 provides complete electrical isolation between MIDI devices</text>
  <text x="110" y="535" font-size="11" fill="#000">• Pull-up resistor (4.7kΩ) ensures proper logic levels on Arduino A4</text>
  <text x="110" y="550" font-size="11" fill="#000">• MIDI OUT: Arduino A5 drives 220Ω resistor to DIN pin 5, +5V to pin 4</text>
  
  <text x="500" y="380" font-size="12" font-weight="bold" fill="#000">Pin Connections:</text>
  <text x="520" y="400" font-size="11" fill="#000">6N138 Pin 2 → MIDI IN pin 5 (via 220Ω)</text>
  <text x="520" y="415" font-size="11" fill="#000">6N138 Pin 3 → MIDI IN pin 4 (via 220Ω)</text>
  <text x="520" y="430" font-size="11" fill="#000">6N138 Pin 5 → Ground</text>
  <text x="520" y="445" font-size="11" fill="#000">6N138 Pin 6 → Arduino A4 + 4.7kΩ to +5V</text>
  <text x="520" y="460" font-size="11" fill="#000">6N138 Pin 8 → +5V</text>
  
  <text x="500" y="485" font-size="12" font-weight="bold" fill="#000">Arduino Code Setup:</text>
  <text x="520" y="505" font-size="10" fill="#000">#include &lt;SoftwareSerial.h&gt;</text>
  <text x="520" y="520" font-size="10" fill="#000">SoftwareSerial MIDI(A4, A5); // RX, TX</text>
  <text x="520" y="535" font-size="10" fill="#000">void setup() {</text>
  <text x="530" y="550" font-size="10" fill="#000">  MIDI.begin(31250); // MIDI baud rate</text>
  <text x="520" y="565" font-size="10" fill="#000">}</text>
  
  <!-- Technical specs -->
  <text x="70" y="590" font-size="12" font-weight="bold" fill="#000">Technical Specifications:</text>
  <text x="90" y="610" font-size="11" fill="#000">• MIDI Standard: Compliant with MIDI 1.0 specification</text>
  <text x="90" y="625" font-size="11" fill="#000">• Baud Rate: 31,250 bits per second (31.25 kbaud)</text>
  <text x="90" y="640" font-size="11" fill="#000">• Isolation: 2500V minimum between input and output sides</text>
  <text x="500" y="610" font-size="11" fill="#000">• Current Loop: Standard 5mA MIDI current loop</text>
  <text x="500" y="625" font-size="11" fill="#000">• Logic Levels: 0V = logic 0, +5V = logic 1</text>
  <text x="500" y="640" font-size="11" fill="#000">• Response Time: &lt;10µs (6N138 high-speed version)</text>
</svg>